//**************************************************************************
//**
//** M_FIXED.C
//**
//**************************************************************************

// HEADER FILES ------------------------------------------------------------

#include <stdlib.h>
#include <m_fixed.h>
#include <limits.h>

// MACROS ------------------------------------------------------------------

// TYPES -------------------------------------------------------------------

// EXTERNAL FUNCTION PROTOTYPES --------------------------------------------

// PUBLIC FUNCTION PROTOTYPES ----------------------------------------------

// PRIVATE FUNCTION PROTOTYPES ---------------------------------------------

// EXTERNAL DATA DECLARATIONS ----------------------------------------------

// PUBLIC DATA DEFINITIONS -------------------------------------------------

// PRIVATE DATA DEFINITIONS ------------------------------------------------

// CODE --------------------------------------------------------------------

//==========================================================================
//
// FixedMul
//
//==========================================================================

fixed_t FixedMul(fixed_t a, fixed_t b)
{
	return ((int64_t)a * (int64_t)b) >> FRACBITS;
}

//==========================================================================
//
// FixedMul
//
//==========================================================================

fixed_t FixedDiv(fixed_t a, fixed_t b)
{
	if ((abs(a) >> 14) >= abs(b)) {
		return (a ^ b) < 0 ? INT_MIN : INT_MAX;
	}

	return (fixed_t)(((int64_t)a << FRACBITS) / b);
}
